package com.dinkydetails.telly;

import android.net.Uri;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {

	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_main);
		getPhoneNumber();
		init();	
	}
	
	/** Create a function to get the Phone Number */
	private void getPhoneNumber()
	{
	}
	
	/** Set up the View */
	private void init()
	{
		//Create a listener for the "call" button
		findViewById(R.id.btnCall).setOnClickListener(new OnClickListener() 
		{			
			@Override
			public void onClick(View v) 
			{
				//grab the text that is displayed in this box and make sure it is valid. 
				String strNumber = ((TextView)findViewById(R.id.tvNumber)).getText().toString();
				
				//validation - check to make sure there is data, if not put up a message
				if(strNumber.length() == 0)
				{
					Toast.makeText(getApplicationContext(), "Please enter number", Toast.LENGTH_SHORT).show();
					return;
				}
				//Start phone permissions and call the number entered
				Intent callIntent = new Intent(Intent.ACTION_CALL);
				callIntent.setData(Uri.parse("tel:"+strNumber));
				startActivity(callIntent);
				
			}
		});
		
	}

}
